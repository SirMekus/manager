import{_ as x,h as u,o as l,c as i,b as t,F as _,k as L,n as C,t as f,d as h,w as g,g as m,r as I,l as N,u as O,m as y,p as B,v as E,i as $}from"./app-c1148ba7.js";import{g as F}from"./index-9d0725f1.js";import{c as V}from"./helper-82031ce3.js";import{r as v,t as p,g as D,f as q}from"./index-37ddc8a9.js";function M(o){v(1,arguments);var s=p(o);return s.setHours(0,0,0,0),s}var A=864e5;function H(o,s){v(2,arguments);var e=M(o),a=M(s),r=e.getTime()-D(e),c=a.getTime()-D(a);return Math.round((r-c)/A)}function k(o,s){var e=o.getFullYear()-s.getFullYear()||o.getMonth()-s.getMonth()||o.getDate()-s.getDate()||o.getHours()-s.getHours()||o.getMinutes()-s.getMinutes()||o.getSeconds()-s.getSeconds()||o.getMilliseconds()-s.getMilliseconds();return e<0?-1:e>0?1:e}function w(o,s){v(2,arguments);var e=p(o),a=p(s),r=k(e,a),c=Math.abs(H(e,a));e.setDate(e.getDate()-r*c);var d=Number(k(e,a)===-r),n=r*(c-d);return n===0?0:n}const P={props:["tasks"],setup(o){function s(e){if((e==null?void 0:e.status)=="COMPLETED")return{"bg-success text-white":!0};if(w(new Date(e==null?void 0:e.due_date),new Date)<=1&&(e==null?void 0:e.status)!=="COMPLETED")return{"bg-danger text-white":!0}}return{capitalLetters:V,format:q,differenceInDays:w,taskIndicator:s}}},Y={class:"table-responsive"},j={class:"table table-stripped table-bordered"},z=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Due Date")])],-1),Q={class:"badge bg-dark"};function U(o,s,e,a,r,c){const d=u("router-link");return l(),i("div",Y,[t("table",j,[z,t("tbody",null,[(l(!0),i(_,null,L(e.tasks.tasks,n=>(l(),i("tr",{key:n.id,class:C(a.taskIndicator(n))},[t("td",null,f(a.capitalLetters(n==null?void 0:n.title)),1),t("td",null,f(a.format(new Date(n==null?void 0:n.due_date),"do,MMMM yyyy")),1),t("td",null,[t("span",Q,[h(d,{class:"text-decoration-none text-white",to:{name:"task_details",query:{id:n==null?void 0:n.id}}},{default:g(()=>[m(" View More ")]),_:2},1032,["to"])])])],2))),128))])])])}const G=x(P,[["render",U]]),J={components:{TaskList:G},setup(){const o=I({loading:!1,status:""}),{result:s,loading:e,refetch:a}=N(F`
      query getTasks ($status: Int)  {
        tasks(status:$status) {
          id
          title
          description
          due_date
          status
        }
      }
    `,()=>({status:o.status>=0?Number(o.status):""})),r=O().data;return o.loading=e,{state:o,user:r,result:s,refetch:a}}},K={class:"row justify-content-center"},W={class:"col-md-12"},X={class:"card overflow-scroll"},Z={class:"card-body"},R={class:"form-inline row mb-3",role:"search"},tt={class:"col-9 my-1"},et=t("label",null,"Search By Status",-1),st=t("option",{selected:"",value:""},"Search By Status",-1),ot=t("option",{value:"0"},"Completed",-1),at=t("option",{value:"1"},"In Progress",-1),nt=t("option",{value:"2"},"Not Started",-1),rt=[st,ot,at,nt],lt={class:"col-3 my-1 mt-4 pt-2"},ct={key:1,class:"rounded-0"},it={class:"alert alert-warning alert-dismissible fade show",role:"alert"},dt=t("br",null,null,-1),ut=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),_t={class:"d-flex justify-content-center"},ft=t("i",{class:"fas fa-edit fa-6x text-center ms-3"},null,-1),ht=t("br",null,null,-1),gt=t("span",{class:"ms-3 fw-bold"},"Create Task",-1);function mt(o,s,e,a,r,c){const d=u("Loading"),n=u("TaskList"),S=u("router-link"),T=u("DashboardMenu");return l(),y(T,null,{default:g(()=>[t("div",K,[t("div",W,[t("div",X,[t("div",Z,[a.state.loading?(l(),y(d,{key:0})):(l(),i(_,{key:1},[a.result?(l(),i(_,{key:0},[t("form",R,[t("div",tt,[et,B(t("select",{class:"form-select","onUpdate:modelValue":s[0]||(s[0]=b=>a.state.status=b)},rt,512),[[E,a.state.status]])]),t("div",lt,[t("button",{type:"submit",class:"btn btn-home btn-sm",onClick:s[1]||(s[1]=$(b=>a.refetch(),["prevent"]))},"Search")])]),h(n,{tasks:a.result},null,8,["tasks"])],64)):(l(),i("div",ct,[t("div",it,[t("strong",null,"Hi "+f(a.user.name.firstname)+"!",1),m(),dt,m("Let's get started in creating your task today. "),ut]),t("div",_t,[h(S,{class:"text-decoration-none text-dark",to:{name:"task_editor"}},{default:g(()=>[ft,ht,gt]),_:1})])]))],64))])])])])]),_:1})}const Dt=x(J,[["render",mt]]);export{Dt as default};
